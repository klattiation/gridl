!function(r,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("gridl",[],n):"object"==typeof exports?exports.gridl=n():r.gridl=n()}("undefined"!=typeof self?self:this,function(){return function(r){function n(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:e})},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},n.p="",n(n.s=0)}([function(r,n,t){"use strict";function e(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}function o(r,n){var t="1d"===r.arrayType?n.length:n.reduce(function(r,n){return r+n.length},0);return r.columns||r.rows?r.columns&&!r.rows&&t%r.columns==0?r.rows=t/r.columns:!r.columns&&r.rows&&t%r.rows==0&&(r.columns=t/r.rows):"2d"===r.arrayType?(r.rows=n.length,r.columns=n[0].length):(r.rows=1,r.columns=n.length),r}function i(r,n,t,e){var o=T(t,n);if(!isNaN(o))return void 0===e?r[o]:(r[o]=e,this)}function u(r,n,t,e,o){var i=x(e,n);return o.forEach(function(e,o){var u=[0,o+i[1]];u[1]>=t||e.forEach(function(t,e){u[0]=e+i[0],u[0]>=n||r.valueAt(u,t)})}),r}function a(r,n,t,e,o){for(var i=x(e,n),u=[Math.min(i[0]+o[0],n),Math.min(i[1]+o[1],t)],a=[],c=i[1];c<u[1];c++){var f=c-i[1];a[f]||(a[f]=[]);for(var s=i[0];s<u[0];s++){var l=s-i[0];a[f][l]=r.valueAt([s,c])}}return a}function c(r,n,t){var e=n.findIndex(t);return e>=0?r.index2pos(e):void 0}function f(r,n,t,e,o){var i=r.getAreaAt(t,e),u=m(i),a=u.findIndex(o);if(a>=0){var c=i[0].length,f=x(t,n),s=p(a,c);return[f[0]+s[0],f[1]+s[1]]}}function s(r,n,t,e){var o=x(t,r),i=o[0]+e[0].length<=r,u=o[1]+e.length<=n;return i&&u}function l(r,n,t,e){var o=x(t,r),i=b(o,e);if(!(i[0]<0||i[0]>=r||i[1]<0||i[1]>=n))return i}function d(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(r))throw new Error("Trying to use gridl with none-array value for data.");if(n.arrayType&&!v.includes(n.arrayType))throw new Error("Trying to use invalid arrayType. expected: ("+v.join("|")+"), actually: "+n.arrayType);var t=A(n,r),o=t.columns,d=t.rows,y="1d"===t.arrayType?[].concat(e(r)):w(r,o,d),T={};return T.columns=function(){return o},T.rows=function(){return d},T.size=function(){return[o,d]},T.index2pos=function(r){return p(r,o)},T.pos2index=function(r){return r?g(r,o):-1},T.valueAt=i.bind(T,y,o),T.setAreaAt=function(r,n){return u(T,o,d,r,n)},T.getAreaAt=function(r,n){return a(T,o,d,r,n)},T.findIndex=function(r){return y.findIndex(r)},T.findPosition=function(r){return c(T,y,r)},T.findPositionInArea=function(r,n,t){return f(T,o,r,n,t)},T.findIndexInArea=function(r,n,t){return T.pos2index(T.findPositionInArea(r,n,t))},T.checkAreaFitsAt=function(r,n){return s(o,d,r,n)},T.getRelativePosition=function(r,n){return l(o,d,r,n)},T.getRelativeIndex=function(r,n){return T.pos2index(T.getRelativePosition(r,n))},T.getRelativeValue=function(r,n){return T.valueAt(T.getRelativePosition(r,n))},T.toArray1D=function(){return[].concat(e(y))},T.toArray2D=h.bind(T,y,o),T.serialize=function(){return{opts:t,data:y}},T}Object.defineProperty(n,"__esModule",{value:!0}),n.gridl=d;var y={arrayType:"1d"},v=Object.freeze(["1d","2d"]),p=n.index2pos=function(r,n){return[r%n,Math.floor(r/n)]},g=n.pos2index=function(r,n){return r[0]+r[1]*n},h=n.toArray2D=function(r,n){return r.reduce(function(r,t,e){var o=p(e,n);return r[o[1]]||(r[o[1]]=[]),r[o[1]][o[0]]=t,r},[])},w=n.toArray1D=function(r,n,t){if(t!==r.length){var o="(expected: "+t+", actually: "+r.length+")";throw new Error("Trying to convert invalid array2D with invalid number of rows to array1D. "+o)}return r.reduce(function(r,t){if(n!==t.length){var o="(expected: "+n+", actually: "+t.length+")";throw new Error("Trying to convert invalid array2D with invalid number of columns to array1D. "+o)}return[].concat(e(r),e(t))},[])},A=function(r,n){return Object.assign({},y,o(Object.assign({},y,r),n))},T=function(r,n){if(!n)throw new Error("_toIndex() needs to know the number of columns.");return Array.isArray(r)?g(r,n):parseInt(r)},x=function(r,n){if(!n)throw new Error("_toPosition() needs to know the number of columns.");return Array.isArray(r)?r:p(r,n)},m=function(r){return r.reduce(function(r,n){return[].concat(e(r),e(n))},[])},b=function(r,n){return[r[0]+n[0],r[1]+n[1]]};d.directions=Object.freeze({TOP:[0,-1],TOP_RIGHT:[1,-1],RIGHT:[1,0],BOTTOM_RIGHT:[1,1],BOTTOM:[0,1],BOTTOM_LEFT:[-1,1],LEFT:[-1,0],TOP_LEFT:[-1,-1]}),n.default=d}])});