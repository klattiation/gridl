!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("gridl",[],r):"object"==typeof exports?exports.gridl=r():n.gridl=r()}("undefined"!=typeof self?self:this,function(){return function(n){function r(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,"a",t),t},r.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},r.p="",r(r.s=0)}([function(n,r,t){"use strict";function e(n){if(Array.isArray(n)){for(var r=0,t=Array(n.length);r<n.length;r++)t[r]=n[r];return t}return Array.from(n)}function o(n){if(!Array.isArray(n))throw new Error("Trying to import data that is not an array.");n.forEach(function(r,t){if(!Array.isArray(r))throw new Error("Trying to import data that is not an array.");if(t>0&&n[t-1].length!==r.length)throw new Error("Trying to import data with different row lengths.");if(r.length<1)throw new Error("Trying to import grid without any columns. You need to provide at least one column.")})}function i(n,r,t){var e=M(t,r);if(!isNaN(e))return n[e]}function u(n,r,t,e,o){var i=M(e,t);return isNaN(i)||(r[i]=o),n}function a(n,r,t,e,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],u=P(e,i);return o.forEach(function(e,o){var i=[0,o+u[1]];i[1]>=t||e.forEach(function(t,e){i[0]=e+u[0],i[0]>=r||n.setValueAt(i,t)})}),n}function f(n,r,t,e,o){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],u=P(e,i),a=[Math.min(u[0]+o[0],r),Math.min(u[1]+o[1],t)],f=[Math.max(0,u[0]),Math.max(0,u[1])],c=[],l=f[1];l<a[1];l++){var v=l-f[1];c[v]||(c[v]=[]);for(var s=f[0];s<a[0];s++){var d=s-f[0];c[v][d]=n.valueAt([s,l])}}return c}function c(n,r,t){var e=r.findIndex(t);return e>=0?I(e,n):void 0}function l(n,r,t,e,o){var i=n.getAreaAt(t,e),u=O(i),a=u.findIndex(o);if(a>=0){var f=i[0].length,c=I(a,f);return[t[0]+c[0],t[1]+c[1]]}}function v(n,r,t,e){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],i=P(t,o),u=i[0]>=0&&i[0]+e[0].length<=n,a=i[1]>=0&&i[1]+e.length<=r;return u&&a}function s(n,r,t){if(!Array.isArray(t))throw new Error("Trying to go to an invalid position. Given: "+t);if(Y([n,r],t))throw new Error("Trying to go to an invalid position. Given: "+t);return t}function d(n,r,t,e){var o=k(t,e);if(Y([n,r],o))throw new Error("Trying to walk to an invalid position. Position: "+o);return o}function w(n,r,t,e,o,i){var u=M(o,t),a=[t,e];if(isNaN(u)||Y(a,o))throw new Error("Trying to move cell from an invalid position. Given: ["+o+"]");var f=M(i,t);if(isNaN(f)||Y(a,i))throw new Error("Trying to move cell to an invalid position. Given: ["+i+"]");return L(r,u,f),n}function h(n,r,t,e,o){if(e<0||e>=t)throw new Error("Trying to move row from an invalid position. Given: "+e);if(o<0||o>=t)throw new Error("Trying to move row to an invalid position. Given: "+o);return O(L(n,e,o))}function m(n,r,t,e,o){if(e<0||e>=r)throw new Error("Trying to move column from an invalid position. Given: "+e);if(o<0||o>=r)throw new Error("Trying to move column to an invalid position. Given: "+o);var i=n.map(function(n){return L(n,e,o)});return O(i)}function p(n,r,t,e,o){if(o<0||o>t)throw new Error("Trying to add row at an invalid position. Given: "+o);if(e.length!==r)throw new Error("Trying to add a row that contains an invalid amount of cells. Expected: "+r+", Given: "+e.length);return n.splice(o,0,e),n}function g(n,r,t,e,o){if(o<0||o>r)throw new Error("Trying to add column at an invalid position. Given: "+o);if(e.length!==t)throw new Error("Trying to add a column that contains an invalid amount of cells. Expected: "+t+", Given: "+e.length);return n.map(function(n,r){return n.splice(o,0,e[r]),n})}function y(n,r,t){if(t<0||t>=r)throw new Error("Trying to remove a row at an invalid position. Given: "+t);if(r<=1)throw new Error("Cannot remove row because the grid would be empty after it.");return n.splice(t,1),n}function E(n,r,t){if(t<0||t>=r)throw new Error("Trying to remove a column at an invalid position. Given: "+t);if(r<=1)throw new Error("Cannot remove column because the grid would be empty after it.");return n.map(function(n){return n.filter(function(n,r){return r!==t})})}function A(n,r,t,e,o){if(e[0]<0||e[0]>=r||e[1]<0||e[1]>=t)throw new Error("Trying to clip data at an invalid position. Given: "+e);var i=k(e,o);return n.filter(function(n,r){return r>=e[1]&&r<i[1]}).map(function(n){return n.filter(function(n,r){return r>=e[0]&&r<i[0]})})}function T(n,r,t){var e=n.size();if(Y(e,r)||Y(e,t))throw new Error("Trying to swap cells with an invalid position.");var o=n.valueAt(r);return n.setValueAt(r,n.valueAt(t)),n.setValueAt(t,o),n}function G(n,r,t,e){if(t<0||t>=r)throw new Error("Trying to swap rows from an invalid position. Given: "+t);if(e<0||e>=r)throw new Error("Trying to swap rows to an invalid position. Given: "+e);return V(n,t,e),O(n)}function x(n,r,t,e){if(t<0||t>=r)throw new Error("Trying to swap columns from an invalid position. Given: "+t);if(e<0||e>=r)throw new Error("Trying to swap columns to an invalid position. Given: "+e);return n.map(function(n){return V(n,t,e),n}),O(n)}function N(n,r,t){var e=t%4;switch(e<0?e+4:e){case 0:return n;case 1:return Array.from({length:r},function(r,t){return _(n,t).reverse()});case 2:return n.reverse().map(function(n,r){return n.reverse()});case 3:return Array.from({length:r},function(t,e){return _(n,r-1-e)});default:throw new Error("Trying to rotate the grid with an invalid steps parameter. Given: "+t)}}function b(n,r){if(void 0===r)return n.reverse();var t=F(r,0,n.length-1),o=n.filter(function(n,r){return r<t});return[].concat(e(n.filter(function(n,r){return r>t}).reverse()),[n[t]],e(o.reverse()))}function C(n){o(n);var r=n.length,t=n[0].length,e=O(n),M=[0,0],P={};return P.numColumns=function(){return t},P.numRows=function(){return r},P.size=function(){return[t,r]},P.setValue=function(n){return u(P,e,t,M,n)},P.value=function(n){return void 0===n?i(e,t,M):u(P,e,t,M,n)},P.setValueAt=function(n,r){return u(P,e,t,n,r)},P.valueAt=function(n,r){return void 0===r?i(e,t,n):u(P,e,t,n,r)},P.moveCell=function(n,o){return w(P,e,t,r,n,o)},P.moveAbs=function(n){return w(P,e,t,r,M,n)},P.moveRel=function(n){return P.moveCell(M,k(M,n))},P.moveRow=function(n,o){return e=h(P.data(),t,r,n,o),P},P.moveColumn=function(n,o){return e=m(P.data(),t,r,n,o),P},P.column=function(n){return _(P.data(),n)},P.row=function(n){return j(P.data(),n)},P.addRow=function(n,o){var i=p(P.data(),t,r,n,o);return e=O(i),r=i.length,P},P.addColumn=function(n,o){var i=g(P.data(),t,r,n,o);return e=O(i),t=i[0].length,P},P.removeRow=function(n){var t=y(P.data(),r,n);return e=O(t),r=t.length,P},P.removeColumn=function(n){var r=E(P.data(),t,n);return e=O(r),t=r[0].length,P},P.clipAt=function(n,o){var i=A(P.data(),t,r,n,o);return e=O(i),r=i.length,t=i[0].length,P},P.clip=function(n){return P.clipAt(M,n)},P.swapCells=function(n,r){return T(P,n,r)},P.swapCell=function(n){return T(P,M,n)},P.swapRows=function(n,t){return e=G(P.data(),r,n,t),P},P.swapColumns=function(n,r){return e=x(P.data(),t,n,r),P},P.setAreaAt=function(n,e,o){return a(P,t,r,n,e,o)},P.setArea=function(n,e){return a(P,t,r,M,n,e)},P.getAreaAt=function(n,e,o){return f(P,t,r,n,e,o)},P.getArea=function(n,e){return f(P,t,r,M,n,e)},P.areaFitsAt=function(n,e,o){return v(t,r,n,e,o)},P.areaFits=function(n,e){return v(t,r,M,n,e)},P.find=function(n){return c(t,e,n)},P.findInArea=function(n,r,e){return l(P,t,n,r,e)},P.data=function(){return R(e,t)},P.rotate=function(n){var o=N(P.data(),t,n);return e=O(o),r=o.length,t=o[0].length,P},P.mirrorX=function(n){return e=O(b(P.data(),n)),P},P.mirrorY=function(n){var r=P.data();return e=O(r.map(function(r){return b(r,n)})),P},P.goto=function(n){var e=s(t,r,n);return M[0]=e[0],M[1]=e[1],P},P.position=function(){return[M[0],M[1]]},P.walk=function(n){var e=d(t,r,M,n);return M[0]=e[0],M[1]=e[1],P},P.map=function(n){var r=e.map(function(r,e){return n(r,I(e,t),P)});return C(R(r,t))},P.forEach=function(n){return e.forEach(function(r,e){return n(r,I(e,t),P)}),P},P.clone=function(){return C(R(e,t)).goto(M)},P}Object.defineProperty(r,"__esModule",{value:!0});var I=function(n,r){return[n%r,Math.floor(n/r)]},M=function(n,r){return n&&n[0]+n[1]*r},R=function(n,r){return n.reduce(function(n,t,e){var o=I(e,r);return n[o[1]]||(n[o[1]]=[]),n[o[1]][o[0]]=t,n},[])},O=function(n){return n.reduce(function(n,r){return[].concat(e(n),e(r))},[])},_=function(n,r){if(r>=0&&r<n[0].length)return n.map(function(n){return n[r]})},j=function(n,r){return n[r]},k=function(n,r){return[n[0]+r[0],n[1]+r[1]]},P=function(n,r){return[n[0]-r[0],n[1]-r[1]]},F=function(n,r,t){return Math.max(Math.min(n,t),r)},V=function(n,r,t){var e=n[r];n[r]=n[t],n[t]=e},L=function(n,r,t){var e=n[r];return n.splice(r,1),n.splice(t,0,e),n},Y=function(n,r){return r[0]<0||r[0]>=n[0]||r[1]<0||r[1]>=n[1]};C.directions=Object.freeze({UP:[0,-1],UP_RIGHT:[1,-1],RIGHT:[1,0],DOWN_RIGHT:[1,1],DOWN:[0,1],DOWN_LEFT:[-1,1],LEFT:[-1,0],UP_LEFT:[-1,-1]}),C.makeGrid=function(n,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},e=parseInt(n),o=parseInt(r);if(e<1||isNaN(e))throw new Error("You need to specify at least one column. Given: "+n);if(o<1||isNaN(o))throw new Error("You need to specify at least one row. Given: "+r);return Array.from({length:o},function(n,r){return Array.from({length:e},function(n,e){return t({column:e,row:r})})})},C.makeList=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},t=parseInt(n);if(t<1||isNaN(t))throw new Error("Trying to make a list with an invalid length. Given: "+n);return Array.from({length:t},function(n,t){return r(t)})},C.make=function(n,r,t){return C(C.makeGrid(n,r,t))},r.default=C,n.exports=r.default}])});